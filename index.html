<html>
    <head>
        <title>Tính GPA giùm bạn (KHTN only)</title>
        <link href="default.css" type="text/css" rel="stylesheet">
    </head>
    <body>
         <div class="class2 memberprofile"> 
             <br>
             <br> 
             <br>
        <h2>KHTN GPA Calculator Bookmarklet</h2>
     

        <ul>
            <li>B1. Nếu thanh bookmark của trình duyệt đang ẩn, nhấn Ctrl+Shift+B để nó hiện lên</li>
            <li>B2. Nhấn và giữ phím chuột vào nút <b>"Khtn GPA"</b> bên dưới</li>
            <li>B3. <b>Kéo chuột</b> vào thanh <b>Bookmark</b> của trình duyệt</li>
            <li>B4. Tới trang Tra cứu kết quả của <b>Portal</b></li>
            <li>B5. <b>Bấm</b> vào <b>bookmark</b> bạn đã tạo ở bước 2</li>
            <li> Xong :D</li>
        </ul>
        <br>
        <br>
        <a class="back" href="javascript: (function gpa() { console.clear(); const currentHref = window.location.href; const dkhpReg = /.portal([1-9]|)\.hcmus\.edu\.vn\/SinhVien\.aspx\?(.*)pid=211/; let tab; if(!currentHref.match(dkhpReg)) { const portalReg = /.portal([1-9]|)\.hcmus\.edu\.vn/; if(currentHref.match(portalReg)) { alert(&quot;Vui l&ograve;ng đi tới trang \&quot;Tra cứu Kết quả học tập\&quot; trước&quot;); } return; }; var dataArray = $(&quot;#aspnetForm&quot;).serializeArray(); var param = dataArray.reduce(function(a, x) { a[x.name] = x.value; return a; }, {});; const isAllSection = param['ctl00$ContentPlaceHolder1$ctl00$cboNamHoc_gvDKHPLichThi$ob_CbocboNamHoc_gvDKHPLichThiTB'] == '--Tất cả--'; let semeterInput = $('input[name=&quot;ctl00$ContentPlaceHolder1$ctl00$cboHocKy_gvDKHPLichThi$ob_CbocboHocKy_gvDKHPLichThiTB&quot;]'); if(semeterInput) semeterInput = semeterInput[0]; else return; const isSemeterDisabled = $(semeterInput).attr('disabled') || $(semeterInput).prop('disabled'); if(!isAllSection || isSemeterDisabled) { param['ctl00$ContentPlaceHolder1$ctl00$cboNamHoc_gvDKHPLichThi$ob_CbocboNamHoc_gvDKHPLichThiTB'] = '--Tất cả--'; param['ctl00$ContentPlaceHolder1$ctl00$cboNamHoc_gvDKHPLichThi$ob_CbocboNamHoc_gvDKHPLichThiSIS'] = '0'; param['ctl00$ContentPlaceHolder1$ctl00$cboNamHoc_gvDKHPLichThi'] = '0'; param['ctl00$ContentPlaceHolder1$ctl00$cboHocKy_gvDKHPLichThi$ob_CbocboHocKy_gvDKHPLichThiTB'] = '1'; param['ctl00$ContentPlaceHolder1$ctl00$cboHocKy_gvDKHPLichThi$ob_CbocboHocKy_gvDKHPLichThiSIS'] = '0'; param['ctl00$ContentPlaceHolder1$ctl00$cboHocKy_gvDKHPLichThi'] = '1'; param['ctl00$ContentPlaceHolder1$ctl00$btnXemDiemThi'] = 'Xem Kết Quả Học Tập'; const parentDiv = $(&quot;#lich-thi-dkhp&quot;)[0]; if(parentDiv) parentDiv.prepend($('&lt;div style=&quot;font-size:20px; color:#1B486A;text-align:center;margin:10px;&quot;&gt;Chờ một ch&uacute;t...&lt;/div&gt;')[0]); $.ajax({ type: &quot;POST&quot;, url: &quot;/SinhVien.aspx?pid=211&quot;, data: param, success: function(res) { let html = $.parseHTML(res); let HK = $(html).find(&quot;input[name='ctl00$ContentPlaceHolder1$ctl00$cboNamHoc_gvDKHPLichThi$ob_CbocboNamHoc_gvDKHPLichThiTB']&quot;); if(HK) console.log($(HK[0]).attr(&quot;value&quot;)); var newDoc = document.open(&quot;text/html&quot;, &quot;replace&quot;); newDoc.write(res); newDoc.close(); gpa(); }, }); return; } tab = $(&quot;#tbDiemThiGK&quot;); const exceptCourses = [ &quot;Anh văn&quot;, &quot;Gi&aacute;o dục quốc ph&ograve;ng&quot;, &quot;Thể dục&quot;, &quot;Anh van&quot;, &quot;Giao duc quoc phong&quot;, &quot;The duc&quot; ]; if (tab) { let mainTable = tab[0]; let rows = tab.find(&quot;tbody tr&quot;); let data = []; let exceptData = []; for (let i = 0; i &lt; rows.length; i++) { const tds = $(rows[i]).find(&quot;td&quot;).not(&quot;.gpa-checkbox&quot;); let row = { id: i + 1, semester: $(tds[0]).text().trim().normalize(), course: $(tds[1]).text().trim().normalize(), credit: parseInt($(tds[2]).text().trim().normalize()), class: $(tds[3]).text().trim().normalize(), ldcode: $(tds[4]).text().trim().normalize(), score: parseFloat($(tds[5]).text().trim().normalize()), note: $(tds[6]).text().trim().normalize(), include: true, whyExclude: &quot;&quot; }; if(!row.credit) {row.credit = 0; row.include = false; row.whyExclude += &quot;Học phần kh&ocirc;ng t&iacute;n chỉ&quot;; } else if(!row.score) {row.score = 0; row.include = false; row.whyExclude +=&quot;Chưa hoặc kh&ocirc;ng c&oacute; điểm&quot;; } else if (row.score &lt; 5) { row.include = false; row.whyExclude += &quot;Điểm nhỏ hơn 5, chưa qua m&ocirc;n. &quot;; } else { let include = true; for (let j = 0; j &lt; exceptCourses.length; j++) { if (row.course.includes(exceptCourses[j])) { include = false; row.whyExclude += &quot;Học phần kh&ocirc;ng t&iacute;nh trong GPA. &quot;; break; } }; row.include = include; } for (let j = 0; j &lt; data.length; j++) { if (data[j].course == row.course) { data[j].include = false; if(!data[j].whyExclude.includes(&quot;Đ&atilde; học lại&quot;)) data[j].whyExclude += &quot;Đ&atilde; học lại. &quot;; } } data.push(row); if (!row.include) exceptData.push(row); } let totalCredits = 0; let totalScores = 0; let gpa = 0; let howICalculated = &quot;%c Điểm t&iacute;nh thế n&agrave;o nhở ?%c \n\n&quot;; let cssLog = [&quot;font-size:16px&quot;, &quot;font-size:normal&quot;]; for (let i = 0; i &lt; data.length; i++) { let item = data[i]; if (item.include) { totalCredits += item.credit; totalScores += item.credit * item.score; howICalculated += &quot; &quot; + item.course + &quot;:%c &quot; + item.score + &quot;%c x%c &quot; + item.credit + &quot;%c =%c &quot; + item.credit * item.score + &quot;%c \n&quot;; cssLog.push(&quot;font-weight:bold;&quot;); cssLog.push(&quot;font-weight:normal;&quot;); cssLog.push(&quot;font-weight:bold;&quot;); cssLog.push(&quot;font-weight:normal;&quot;); cssLog.push(&quot;font-weight:bold;&quot;); cssLog.push(&quot;font-weight:normal;&quot;); } else { howICalculated += &quot;%c &quot; + item.course + &quot;: &quot; + item.score + &quot; x &quot; + item.credit + &quot;%c \n&quot;; cssLog.push(&quot;color:orange;text-decoration: line-through;&quot;); cssLog.push(&quot;color:black;&quot;); } } gpa = totalScores / totalCredits; let removedCoursesSize= 0; for(let i =0;i&lt; data.length;i++) if(!data[i].include) removedCoursesSize++; console.log(&quot;%c \n Ch&agrave;o nh&eacute;, GPA n&egrave;:\n %c&quot; + gpa + &quot;\n&quot;, &quot;color:black&quot;, &quot;color:blue; font-size: 30px;&quot;); console.log(&quot;%c \n Tổng t&iacute;n chỉ:\n %c&quot; + totalCredits + &quot;\n&quot;, &quot;color:black&quot;, &quot;color:blue; font-size: 30px;&quot;); console.log(&quot;%c \n Tổng điểm:\n %c&quot; + totalScores + &quot;\n&quot;, &quot;color:black&quot;, &quot;color:blue; font-size: 30px;&quot;); console.log(&quot;%c \n Tổng học phần:\n %c&quot; + data.length + &quot;\n&quot;, &quot;color:black&quot;, &quot;color:blue; font-size: 30px;&quot;); console.log(&quot;%c \n Tổng học phần trong GPA:\n %c&quot; + (data.length - removedCoursesSize) + &quot;\n&quot;, &quot;color:black&quot;, &quot;color:blue; font-size: 30px;&quot;); howICalculated += &quot;-------------\n&quot; + &quot;GPA : %c &quot; + totalScores + &quot; / &quot; + totalCredits + &quot; = &quot; + gpa; cssLog.push(&quot;font-weight:bold&quot;); let removedSection = &quot;%c Kh&ocirc;ng bao gồm những học phần sau đ&acirc;y: \n\n%c&quot;; let removedCss = [&quot;font-size:16px&quot;, &quot;font-size:normal&quot;]; for (let i = 0; i &lt; exceptData.length; i++) { removedSection += &quot;%c loại bỏ: %c&quot; + exceptData[i].course + &quot; (&quot; + exceptData[i].semester + &quot;)&quot; + &quot;\n%c l&yacute; do: %c&quot; + exceptData[i].whyExclude + &quot;\n\n%c&quot;; removedCss.push(&quot;color:black&quot;); removedCss.push(&quot;color:blue&quot;); removedCss.push(&quot;color:black&quot;); removedCss.push(&quot;color:red&quot;); removedCss.push(&quot;color:black&quot;); } removedSection += &quot;%c &quot; + removedCoursesSize + &quot; học phần đ&atilde; loại bỏ.%c\n&quot;; removedCss.push(&quot;color:red&quot;); removedCss.push(&quot;color:black&quot;); console.log(removedSection, ...removedCss); console.log(howICalculated, ...cssLog); console.log(&quot;(K&eacute;o l&ecirc;n để xem chi tiết)&quot;); let headTr = tab.find(&quot;thead tr&quot;)[0]; if ($(headTr).find(&quot;th&quot;).length &lt; 8) { let headTh = $($(headTr).find(&quot;th&quot;)[0]).clone(); $(headTh).attr(&quot;title&quot;, &quot;T&iacute;nh hay kh&ocirc;ng t&iacute;nh học phần n&agrave;y trong GPA&quot;); $(headTh).children().html(&quot;Trong GPA&quot;); $(headTr).prepend(headTh); for (let i = 0; i &lt; rows.length; i++) { $(rows[i]).prepend('&lt;td class= &quot;center gpa-checkbox&quot; style=&quot;width:60px;&quot; &gt;&lt;input type=&quot;checkbox&quot;' + ((data[i].include) ? &quot; checked &quot; : &quot;&quot;) + ' /&gt;&lt;/td&gt;'); if(!data[i].include) { if(data[i].whyExclude.includes(&quot;kh&ocirc;ng t&iacute;nh&quot;)) $(rows[i]).attr(&quot;style&quot;,&quot;color:blue;text-decoration: line-through;&quot;); else $(rows[i]).attr(&quot;style&quot;,&quot;color:red;text-decoration: line-through;&quot;); } } let parentDiv = $(&quot;#lich-thi-dkhp&quot;)[0]; let gpaFieldSet = $('&lt;fieldset&gt;&lt;legend&gt;Thống k&ecirc; GPA&lt;/legend&gt;&lt;div id=&quot;tbGPA_wrapper&quot; class=&quot;dataTables_wrapper&quot; rold=&quot;grid&quot;&gt;&lt;table id=&quot;tbGPA&quot; class=&quot;dkhp-table dataTable&quot;&gt;&lt;thead&gt;&lt;/thead&gt;&lt;tbody role=&quot;alert&quot; aria-live=&quot;polite&quot; aria-relevant=&quot;all&quot;&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p style=&quot;margin-top: 10px; color: blue;&quot;&gt;&lt;strong&gt;(*)&lt;/strong&gt;: Nhấn Ctr+Shift+I v&agrave; chọn tab Console để xem chi tiết t&iacute;nh to&aacute;n.&lt;/p&gt;&lt;/fieldset&gt;'); let gpaTableHead = $(gpaFieldSet).find(&quot;thead&quot;)[0]; let gpaTableBody = $(gpaFieldSet).find(&quot;tbody&quot;)[0]; const gpaHeadCol1 = $($(headTr).find(&quot;th&quot;)[2]).clone(); $(gpaHeadCol1).attr(&quot;title&quot;,&quot;T&ecirc;n mục&quot;); $(gpaHeadCol1).children().html(&quot;T&ecirc;n mục&quot;); const gpaHeadCol2 = headTh.clone(); $(gpaHeadCol2).attr(&quot;title&quot;,&quot;Gi&aacute; trị&quot;); $(gpaHeadCol2).children().html(&quot;Gi&aacute; trị&quot;); $(gpaTableHead).append(gpaHeadCol1); $(gpaTableHead).append(gpaHeadCol2); $(gpaTableBody).append('&lt;tr class=&quot;odd&quot;&gt;&lt;td class=&quot;left &quot;&gt;Điểm trung b&igrave;nh t&iacute;ch lũy (GPA)&lt;/td&gt;&lt;td class=&quot;center gpa&quot;&gt;&lt;b&gt;'+gpa+'&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;'); $(gpaTableBody).append('&lt;tr class=&quot;even&quot;&gt;&lt;td class=&quot;left&quot;&gt;Tổng t&iacute;n chỉ đ&atilde; t&iacute;ch luỹ&lt;/td&gt;&lt;td class=&quot;center gpa&quot;&gt;'+totalCredits+' t&iacute;n chỉ&lt;/td&gt;&lt;/tr&gt;'); $(gpaTableBody).append('&lt;tr class=&quot;odd&quot;&gt;&lt;td class=&quot;left&quot;&gt;Tổng điểm đ&atilde; t&iacute;ch lũy&lt;/td&gt;&lt;td class=&quot;center gpa&quot;&gt;'+totalScores+'&lt;/td&gt;&lt;/tr&gt;'); $(gpaTableBody).append('&lt;tr class=&quot;even&quot;&gt;&lt;td class=&quot;left&quot;&gt;S&ocirc; học phần đ&atilde; học&lt;/td&gt;&lt;td class=&quot;center gpa&quot;&gt;'+data.length+' học phần&lt;/td&gt;&lt;/tr&gt;'); $(gpaTableBody).append('&lt;tr class=&quot;odd&quot;&gt;&lt;td class=&quot;left&quot;&gt;Số học phần t&iacute;nh trong GPA&lt;/td&gt;&lt;td class=&quot;center gpa&quot;&gt;'+(data.length - removedCoursesSize)+' học phần&lt;/td&gt;&lt;/tr&gt;'); $(parentDiv).prepend(gpaFieldSet); } else { for(let i = 0;i &lt;rows.length;i++) { if(data[i].include) $($(rows[i]).find(&quot;input&quot;)[0]).attr('checked', 'checked'); else $($(rows[i]).find(&quot;input&quot;)[0]).removeAttr('checked'); } } } else alert(&quot;Xin lỗi, kh&ocirc;ng thể ph&acirc;n t&iacute;ch website&quot;); } )();"> Khtn GPA </a>
        <br>
        <br>
        <hr>
        <a class="back" href="guideline_mobile.html"> Hướng dẫn dành cho điện thoại di động ></a>
        <br>
        <br>
        <br>
        <a class="back" href="https://portal6.hcmus.edu.vn/SinhVien.aspx?pid=211" target="_blank"> Đi tới Portal ></a>
        </div>
    </body>
</html>
